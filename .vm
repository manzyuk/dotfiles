;;;; -*- mode: lisp -*-
;;; VM setup (see http://web.psung.name/emacstips/vm.html)
(autoload 'vm "vm" "Start VM on your primary inbox." t)
(autoload 'vm-other-frame "vm" "Like `vm' but starts in another frame." t)
(autoload 'vm-visit-folder "vm" "Start VM on an arbitrary folder." t)
(autoload 'vm-visit-virtual-folder "vm" "Visit a VM virtual folder." t)
(autoload 'vm-mode "vm" "Run VM major mode on a buffer." t)
(autoload 'vm-mail "vm" "Send a mail message using VM." t)
(autoload 'vm-submit-bug-report "vm" "Send a bug report about VM." t)

(setq vm-folder-directory    "~/Mail"
      vm-primary-inbox       "~/Mail/INBOX"
      mail-archive-file-name "~/Mail/sent")

(setq vm-spool-files
      '(("~/Mail/INBOX"
	 "pop-ssl:pop.gmail.com:995:pass:manzyuk:*"
	 "~/Mail/INBOX.CRASH")))

(setq password-cache-expiry 86400)
(setq vm-stunnel-program "stunnel4")

(setq mail-from-style 'angels
      mail-interactive nil
      vm-preview-lines nil
      vm-delete-empty-folders nil)

(setq-default vm-summary-show-threads t)

(setq vm-delete-after-archiving t
      vm-delete-after-saving    t
      vm-move-after-deleting    t)

(setq vm-auto-folder-alist
      '(("To"
	 (".*" . "archive"))))

(define-key vm-mode-map ":" 'bbdb/vm-show-sender)
(define-key vm-mail-mode-map "\t" 'bbdb-complete-name)

(global-set-key "\C-xm" 'vm-mail)